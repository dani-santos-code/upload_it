{"ast":null,"code":"var _jsxFileName = \"/Users/danielesantos/Desktop/upload_it/client/src/UserContext.js\";\nimport React, { createContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nexport const UserContext = createContext(null);\n\nconst UserProvider = ({\n  children\n}) => {\n  const [token, setToken] = useState(null);\n  const [user, setUser] = useState(null);\n  let history = useHistory();\n\n  const handleLogin = ({\n    email,\n    password\n  }) => {\n    fetch(\"http://127.0.0.1:3000/api/v1/users/login\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      mode: \"cors\",\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(res => res.json()).then(({\n      user,\n      token\n    }) => {\n      setToken(token);\n      setUser(user);\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"user\", JSON.stringify(user));\n    });\n  };\n\n  const handleSignUp = ({\n    name,\n    email,\n    password\n  }) => {\n    fetch(\"http://127.0.0.1:3000/api/v1/users\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      mode: \"cors\",\n      body: JSON.stringify({\n        name,\n        email,\n        password\n      })\n    }).then(res => res.json()).then(({\n      user,\n      token\n    }) => {\n      setToken(token);\n      setUser(user);\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      history.push(\"/dashboard\");\n      history.go();\n    }).catch(e => {\n      console.log(e);\n      history.push(\"/signup\");\n    });\n  };\n\n  useEffect(() => {\n    const localToken = localStorage.getItem(\"token\");\n    const localUser = localStorage.getItem(\"user\");\n    setToken(localToken);\n    setUser(JSON.parse(localUser));\n  }, []);\n  return /*#__PURE__*/React.createElement(UserContext.Provider, {\n    value: {\n      handleLogin,\n      handleSignUp,\n      token,\n      user\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, children);\n};\n\nexport default UserProvider;","map":{"version":3,"sources":["/Users/danielesantos/Desktop/upload_it/client/src/UserContext.js"],"names":["React","createContext","useEffect","useState","useHistory","UserContext","UserProvider","children","token","setToken","user","setUser","history","handleLogin","email","password","fetch","method","headers","mode","body","JSON","stringify","then","res","json","localStorage","setItem","handleSignUp","name","push","go","catch","e","console","log","localToken","getItem","localUser","parse"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,SAA/B,EAA0CC,QAA1C,QAA0D,OAA1D;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAO,MAAMC,WAAW,GAAGJ,aAAa,CAAC,IAAD,CAAjC;;AAEP,MAAMK,YAAY,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AACrC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAC,IAAD,CAAhC;AACA,MAAIS,OAAO,GAAGR,UAAU,EAAxB;;AAEA,QAAMS,WAAW,GAAG,CAAC;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,GAAD,KAAyB;AAC3CC,IAAAA,KAAK,CAAC,0CAAD,EAA6C;AAChDC,MAAAA,MAAM,EAAE,MADwC;AAEhDC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFuC;AAKhDC,MAAAA,IAAI,EAAE,MAL0C;AAMhDC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAER,QAAAA,KAAF;AAASC,QAAAA;AAAT,OAAf;AAN0C,KAA7C,CAAL,CAQGQ,IARH,CAQSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EARjB,EASGF,IATH,CASQ,CAAC;AAAEb,MAAAA,IAAF;AAAQF,MAAAA;AAAR,KAAD,KAAqB;AACzBC,MAAAA,QAAQ,CAACD,KAAD,CAAR;AACAG,MAAAA,OAAO,CAACD,IAAD,CAAP;AACAgB,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BnB,KAA9B;AACAkB,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BN,IAAI,CAACC,SAAL,CAAeZ,IAAf,CAA7B;AACD,KAdH;AAeD,GAhBD;;AAkBA,QAAMkB,YAAY,GAAG,CAAC;AAAEC,IAAAA,IAAF;AAAQf,IAAAA,KAAR;AAAeC,IAAAA;AAAf,GAAD,KAA+B;AAClDC,IAAAA,KAAK,CAAC,oCAAD,EAAuC;AAC1CC,MAAAA,MAAM,EAAE,MADkC;AAE1CC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAFiC;AAK1CC,MAAAA,IAAI,EAAE,MALoC;AAM1CC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEO,QAAAA,IAAF;AAAQf,QAAAA,KAAR;AAAeC,QAAAA;AAAf,OAAf;AANoC,KAAvC,CAAL,CAQGQ,IARH,CAQSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EARjB,EASGF,IATH,CASQ,CAAC;AAAEb,MAAAA,IAAF;AAAQF,MAAAA;AAAR,KAAD,KAAqB;AACzBC,MAAAA,QAAQ,CAACD,KAAD,CAAR;AACAG,MAAAA,OAAO,CAACD,IAAD,CAAP;AACAgB,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BnB,KAA9B;AACAkB,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BN,IAAI,CAACC,SAAL,CAAeZ,IAAf,CAA7B;AACAE,MAAAA,OAAO,CAACkB,IAAR,CAAa,YAAb;AACAlB,MAAAA,OAAO,CAACmB,EAAR;AACD,KAhBH,EAiBGC,KAjBH,CAiBUC,CAAD,IAAO;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACArB,MAAAA,OAAO,CAACkB,IAAR,CAAa,SAAb;AACD,KApBH;AAqBD,GAtBD;;AAwBA5B,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMkC,UAAU,GAAGV,YAAY,CAACW,OAAb,CAAqB,OAArB,CAAnB;AACA,UAAMC,SAAS,GAAGZ,YAAY,CAACW,OAAb,CAAqB,MAArB,CAAlB;AACA5B,IAAAA,QAAQ,CAAC2B,UAAD,CAAR;AACAzB,IAAAA,OAAO,CAACU,IAAI,CAACkB,KAAL,CAAWD,SAAX,CAAD,CAAP;AACD,GALQ,EAKN,EALM,CAAT;AAOA,sBACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAAEzB,MAAAA,WAAF;AAAee,MAAAA,YAAf;AAA6BpB,MAAAA,KAA7B;AAAoCE,MAAAA;AAApC,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGH,QADH,CADF;AAKD,CA3DD;;AA6DA,eAAeD,YAAf","sourcesContent":["import React, { createContext, useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nexport const UserContext = createContext(null);\n\nconst UserProvider = ({ children }) => {\n  const [token, setToken] = useState(null);\n  const [user, setUser] = useState(null);\n  let history = useHistory();\n\n  const handleLogin = ({ email, password }) => {\n    fetch(\"http://127.0.0.1:3000/api/v1/users/login\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      mode: \"cors\",\n      body: JSON.stringify({ email, password }),\n    })\n      .then((res) => res.json())\n      .then(({ user, token }) => {\n        setToken(token);\n        setUser(user);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"user\", JSON.stringify(user));\n      });\n  };\n\n  const handleSignUp = ({ name, email, password }) => {\n    fetch(\"http://127.0.0.1:3000/api/v1/users\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      mode: \"cors\",\n      body: JSON.stringify({ name, email, password }),\n    })\n      .then((res) => res.json())\n      .then(({ user, token }) => {\n        setToken(token);\n        setUser(user);\n        localStorage.setItem(\"token\", token);\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        history.push(\"/dashboard\");\n        history.go();\n      })\n      .catch((e) => {\n        console.log(e);\n        history.push(\"/signup\");\n      });\n  };\n\n  useEffect(() => {\n    const localToken = localStorage.getItem(\"token\");\n    const localUser = localStorage.getItem(\"user\");\n    setToken(localToken);\n    setUser(JSON.parse(localUser));\n  }, []);\n\n  return (\n    <UserContext.Provider value={{ handleLogin, handleSignUp, token, user }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport default UserProvider;\n"]},"metadata":{},"sourceType":"module"}